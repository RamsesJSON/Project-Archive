<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Self Observation Meditation</title>
    <meta name="description"
        content="Self Observation Meditation — Watch your thoughts, emotions, and desires without attachment. A guided meditation tool by HP Hooded Cobra 666.">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600&display=swap" rel="stylesheet">
</head>

<body>
    <div id="app">

        <!-- ═══════════ MENU SCREEN ═══════════ -->
        <section id="menu-screen" class="screen active">
            <div class="menu-content">
                <header class="menu-header">
                    <h1>Self Observation</h1>
                    <p class="tagline">The Meditation of the Observer</p>
                </header>

                <div class="intro-text" id="intro-toggle-area">
                    <p>To maintain the state of the observer is to watch your thoughts and feelings like clouds
                        passing in the sky, without getting involved. It is crucial not to judge them as good or bad,
                        because judgment gives them power and starts an internal fight.</p>
                    <button class="text-toggle-btn" id="intro-expand-btn">
                        <span>Read more</span>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </button>
                    <div class="intro-expanded hidden" id="intro-expanded">
                        <p>Doing nothing is not passivity; it is simply not acting. By simply observing, you create a
                            space between you and your thoughts, so you can observe them.</p>
                    </div>
                </div>

                <div class="level-grid">
                    <button class="level-card" data-level="1" id="level-card-1">
                        <div class="card-line"></div>
                        <span class="level-number">01</span>
                        <span class="level-title">Thought Observation</span>
                        <span class="level-desc">Observe your thoughts as they arise and pass. Watch them like clouds
                            in the sky.</span>
                        <div class="card-meta">
                            <span class="meta-duration">5 min</span>
                            <span class="meta-sessions" id="card-sessions-1">0 sessions</span>
                            <span class="meta-time" id="card-time-1">0m</span>
                        </div>
                    </button>

                    <button class="level-card" data-level="2" id="level-card-2">
                        <div class="card-line"></div>
                        <span class="level-number">02</span>
                        <span class="level-title">Emotional Observation</span>
                        <span class="level-desc">Shift your focus from thoughts to feelings. Note their presence and
                            let them go.</span>
                        <div class="card-meta">
                            <span class="meta-duration">5 min</span>
                            <span class="meta-sessions" id="card-sessions-2">0 sessions</span>
                            <span class="meta-time" id="card-time-2">0m</span>
                        </div>
                    </button>

                    <button class="level-card" data-level="3" id="level-card-3">
                        <div class="card-line"></div>
                        <span class="level-number">03</span>
                        <span class="level-title">Desire Observation</span>
                        <span class="level-desc">Observe raw impulses and desires from your lower abdomen. Acknowledge
                            every urge without acting.</span>
                        <div class="card-meta">
                            <span class="meta-duration">5 min</span>
                            <span class="meta-sessions" id="card-sessions-3">0 sessions</span>
                            <span class="meta-time" id="card-time-3">0m</span>
                        </div>
                    </button>
                </div>

                <!-- Mastery -->
                <div class="mastery-section">
                    <button class="mastery-toggle" id="mastery-toggle">
                        <span>How to know you have mastered this</span>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </button>
                    <div class="mastery-content hidden" id="mastery-content">
                        <p>You are now able to behold all three levels of yourself, without being entangled in them, and
                            without judgment. You observe and you know.</p>
                    </div>
                </div>
            </div>

            <footer class="menu-footer">
                <div class="footer-row">
                    <div class="credits">
                        <p>Based on "The Self Observation Meditation" by <strong>High Priest Hooded Cobra
                                666</strong></p>
                        <a href="https://templeofzeus.org/Self_Observation_Meditation.php" target="_blank"
                            rel="noopener noreferrer">Source: Temple of Zeus</a>
                    </div>
                    <div class="footer-actions">
                        <button id="import-btn" class="icon-btn" aria-label="Import Data" title="Import Data">
                            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="1.5">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                                <polyline points="7 10 12 15 17 10" />
                                <line x1="12" y1="15" x2="12" y2="3" />
                            </svg>
                        </button>
                        <button id="export-btn" class="icon-btn" aria-label="Export Data" title="Export Data">
                            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="1.5">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                                <polyline points="17 8 12 3 7 8" />
                                <line x1="12" y1="3" x2="12" y2="15" />
                            </svg>
                        </button>
                        <button id="stats-btn" class="icon-btn" aria-label="Statistics" title="Your Progress">
                            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="1.5">
                                <path d="M12 20V10M18 20V4M6 20v-6" />
                            </svg>
                        </button>
                    </div>
                </div>
            </footer>
        </section>

        <!-- ═══════════ SESSION SCREEN ═══════════ -->
        <section id="session-screen" class="screen hidden">

            <!-- Session header -->
            <div class="session-header">
                <button id="exit-btn" class="icon-btn" aria-label="Exit Session" title="Exit (Esc)">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="1.5">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
                <span class="session-level-label" id="session-level-label">Level 1: Thought Observation</span>
                <button id="settings-btn" class="icon-btn" aria-label="Settings" title="Settings">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="1.5">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path
                            d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                        </path>
                    </svg>
                </button>
            </div>

            <!-- Observer visual — a still eye/circle representing awareness -->
            <div class="observer-guide" id="observer-guide">
                <div class="observer-ring" id="observer-ring">
                    <div class="observer-label" id="observer-label">observe</div>
                </div>
            </div>

            <!-- Instructions area -->
            <div class="instruction-area">
                <div class="instruction-steps" id="instruction-steps">
                    <!-- Steps injected by JS -->
                </div>
            </div>

            <!-- Timer -->
            <div class="timer-area">
                <div class="timer-ring-container">
                    <svg class="timer-ring" viewBox="0 0 200 200">
                        <circle class="timer-ring-bg" cx="100" cy="100" r="90" />
                        <circle class="timer-ring-progress" id="timer-ring-progress" cx="100" cy="100" r="90" />
                    </svg>
                    <div class="timer-inner">
                        <span class="time-display" id="time-remaining">05:00</span>
                        <span class="overtime-display hidden" id="overtime-indicator">+<span
                                id="overtime-display">00:00</span></span>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls">
                <button id="start-btn" class="control-btn primary">Begin</button>
                <button id="pause-btn" class="control-btn hidden">Pause</button>
                <button id="resume-btn" class="control-btn hidden">Resume</button>
                <button id="finish-btn" class="control-btn finish hidden">Finish</button>
            </div>

            <!-- Settings Modal -->
            <div class="modal-overlay hidden" id="settings-overlay">
                <div class="modal">
                    <h2>Session Settings</h2>
                    <div class="setting-group">
                        <label for="duration-input">Duration (minutes)</label>
                        <input type="number" id="duration-input" value="5" min="1" max="60">
                    </div>
                    <div class="setting-group toggle-group">
                        <span>End Sound</span>
                        <label class="toggle">
                            <input type="checkbox" id="sound-toggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="setting-group toggle-group">
                        <span>Auto-advance Instructions</span>
                        <label class="toggle">
                            <input type="checkbox" id="auto-advance-toggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <button id="close-settings-btn" class="control-btn modal-save">Save</button>
                </div>
            </div>
        </section>

        <!-- ═══════════ STATS OVERLAY ═══════════ -->
        <div id="stats-overlay" class="modal-overlay hidden">
            <div class="modal stats-modal">
                <h2>Your Progress</h2>

                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-value" id="total-sessions">0</span>
                        <span class="stat-label">Total Sessions</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-value" id="total-time">0m</span>
                        <span class="stat-label">Total Time</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-value" id="current-streak">0</span>
                        <span class="stat-label">Day Streak</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-value" id="last-session">—</span>
                        <span class="stat-label">Last Session</span>
                    </div>
                </div>

                <!-- Per-Level Detailed Breakdown -->
                <div class="stats-breakdown">
                    <h3>Level 1 — Thought Observation</h3>
                    <div class="breakdown-row">
                        <span>Sessions</span>
                        <span id="level1-sessions">0</span>
                    </div>
                    <div class="breakdown-row">
                        <span>Total Time</span>
                        <span id="level1-time">0m</span>
                    </div>
                    <div class="breakdown-row">
                        <span>Last Practiced</span>
                        <span id="level1-last">—</span>
                    </div>
                </div>

                <div class="stats-breakdown">
                    <h3>Level 2 — Emotional Observation</h3>
                    <div class="breakdown-row">
                        <span>Sessions</span>
                        <span id="level2-sessions">0</span>
                    </div>
                    <div class="breakdown-row">
                        <span>Total Time</span>
                        <span id="level2-time">0m</span>
                    </div>
                    <div class="breakdown-row">
                        <span>Last Practiced</span>
                        <span id="level2-last">—</span>
                    </div>
                </div>

                <div class="stats-breakdown">
                    <h3>Level 3 — Desire Observation</h3>
                    <div class="breakdown-row">
                        <span>Sessions</span>
                        <span id="level3-sessions">0</span>
                    </div>
                    <div class="breakdown-row">
                        <span>Total Time</span>
                        <span id="level3-time">0m</span>
                    </div>
                    <div class="breakdown-row">
                        <span>Last Practiced</span>
                        <span id="level3-last">—</span>
                    </div>
                </div>

                <!-- Session History -->
                <div class="stats-breakdown">
                    <h3>Recent Sessions</h3>
                    <div id="session-history">
                        <p class="empty-history">No sessions recorded yet.</p>
                    </div>
                </div>

                <div class="modal-actions">
                    <button id="close-stats-btn" class="control-btn">Close</button>
                    <button id="reset-stats-btn" class="control-btn danger">Reset Data</button>
                </div>
            </div>
        </div>

        <!-- Confirm Reset -->
        <div id="confirm-overlay" class="modal-overlay hidden">
            <div class="modal confirm-modal">
                <p>Reset all meditation data? This cannot be undone.</p>
                <div class="modal-actions">
                    <button id="confirm-reset-btn" class="control-btn danger">Reset</button>
                    <button id="cancel-reset-btn" class="control-btn">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Exit Confirmation -->
        <div id="exit-confirm-overlay" class="modal-overlay hidden">
            <div class="modal confirm-modal">
                <p>End this session? Your progress will not be saved.</p>
                <div class="modal-actions">
                    <button id="confirm-exit-btn" class="control-btn danger">End Session</button>
                    <button id="cancel-exit-btn" class="control-btn">Continue</button>
                </div>
            </div>
        </div>

        <!-- Hidden file input for import -->
        <input type="file" id="import-file-input" accept=".json" style="display:none">
    </div>

    <script src="script.js"></script>
</body>

</html>